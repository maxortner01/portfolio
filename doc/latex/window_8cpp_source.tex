\section{window.\+cpp}
\label{window_8cpp_source}\index{src/engine/window.\+cpp@{src/engine/window.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#include "window.h"}
00002 
00003 GLFWwindow* Window::window = NULL;
00004 
00005 \textcolor{keywordtype}{int} Window::width  = 0;
00006 \textcolor{keywordtype}{int} Window::height = 0;
00007 
00008 \textcolor{keywordtype}{void} print(std::string val, \textcolor{keywordtype}{bool} breakline) \{
00009     std::cout << val;
00010     \textcolor{keywordflow}{if} ( breakline ) \{ std::cout << std::endl; \}
00011 \}
00012 
00013 \textcolor{comment}{//Initialized width, height, and title variables. Calls init}
00014 Window::Window(\textcolor{keywordtype}{int} w, \textcolor{keywordtype}{int} h, std::string t) \{
00015     width = w; height = h; title = t;
00016 
00017     \textcolor{comment}{//Set to true for fullscreen}
00018     fullscreen = \textcolor{keyword}{false};
00019     frame      = 0;
00020 
00021     init();
00022 \}
00023 
00024 \textcolor{comment}{//Sets up initial glfw and opengl context creation}
00025 \textcolor{keywordtype}{void} Window::init() \{
00026     \textcolor{comment}{//Initialize glfw}
00027 
00028     print(\textcolor{stringliteral}{"Initializing GLFW... "}, \textcolor{keyword}{false});
00029 
00030     \textcolor{keywordflow}{if} ( !glfwInit() ) \{
00031         \textcolor{keywordflow}{throw} \textcolor{keyword}{new} std::runtime\_error(\textcolor{stringliteral}{"GLFW initialsation failed!"});
00032     \}
00033     
00034     print(\textcolor{stringliteral}{"done"}, \textcolor{keyword}{true});
00035     print(\textcolor{stringliteral}{"Setting window hints... "}, \textcolor{keyword}{false});
00036 
00037     \textcolor{comment}{//Make window invisible during creation}
00038     glfwWindowHint(GLFW\_VISIBLE, GLFW\_FALSE);
00039 
00040     print(\textcolor{stringliteral}{"done"}, \textcolor{keyword}{true});
00041     print(\textcolor{stringliteral}{"Fullscreen... "}, \textcolor{keyword}{false});
00042 
00043     \textcolor{comment}{//Check monitor value for fullscreen}
00044     GLFWmonitor* monitor;
00045     \textcolor{keywordflow}{if} ( fullscreen ) \{
00046         print(\textcolor{stringliteral}{"true"}, \textcolor{keyword}{true});
00047         monitor = glfwGetPrimaryMonitor();
00048 
00049     \} \textcolor{keywordflow}{else} \{ 
00050         print(\textcolor{stringliteral}{"false"}, \textcolor{keyword}{true}); 
00051         monitor = NULL;
00052     \}
00053 
00054     print(\textcolor{stringliteral}{"Creating window instance... "}, \textcolor{keyword}{false});
00055 
00056     \textcolor{comment}{//Create glfw window instance}
00057     window = glfwCreateWindow(width, height, title.c\_str(), monitor, 0);
00058     \textcolor{keywordflow}{if} ( !window ) \{
00059         \textcolor{keywordflow}{throw} \textcolor{keyword}{new} std::runtime\_error(\textcolor{stringliteral}{"GLFW failed to create window!"});
00060     \}
00061 
00062     print(\textcolor{stringliteral}{"done"}, \textcolor{keyword}{true}); 
00063     print(\textcolor{stringliteral}{"Evaluating primary monitor... "}, \textcolor{keyword}{false});
00064 
00065     \textcolor{comment}{//Move window to center of screen}
00066     GLFWvidmode videomode = *glfwGetVideoMode(glfwGetPrimaryMonitor());
00067     glfwSetWindowPos(window, (videomode.width - width) / 2, (videomode.height  - height) / 2);
00068 
00069     print(\textcolor{stringliteral}{"done"}, \textcolor{keyword}{true}); 
00070 
00071     glfwShowWindow(window);
00072     glfwMakeContextCurrent(window);
00073 
00074     print(\textcolor{stringliteral}{"Initializing GLEW... "}, \textcolor{keyword}{false});
00075 
00076     \textcolor{comment}{//Initializing GLEW}
00077     \textcolor{keywordflow}{if} ( glewInit() != GLEW\_OK ) \{
00078         \textcolor{keywordflow}{throw} \textcolor{keyword}{new} std::runtime\_error(\textcolor{stringliteral}{"GLEW initialization failed!"});
00079     \}
00080 
00081     print(\textcolor{stringliteral}{"done"}, \textcolor{keyword}{true});
00082 
00083     \textcolor{comment}{//GL.createCapabilities();}
00084 \}
00085 
00086 \textcolor{keywordtype}{void} Window::update() \{
00087     glfwPollEvents();
00088 \}
00089 
00090 \textcolor{keywordtype}{void} Window::render(Screen* currentScreen) \{
00091     currentScreen->update();
00092     currentScreen->render();
00093     glfwSwapBuffers(window);
00094     frame++;
00095 \}
00096 
00097 Window::~Window() \{
00098     
00099 \}
\end{DoxyCode}
